# 幂等

## 1. 什么是接口幂等

## 2. 为什么要实现幂等

1. 前端重复提交表单（有可能是用户重复点击）
2. 用户恶意进行刷单（有可能黑客拦截重发）
3. 接口超时重复提交
4. 消息进行重复消费

## 3. 引入幂等性后对系统的影响

1. 把并行执行的功能改为串行执行，降低了执行效率。
2. 增加了额外控制幂等的业务逻辑，复杂化了业务功能。
    >很多功能很好用，但是需要考虑复杂性问题，比如redis和mq。

所以普通接口不用引入幂等性

## 4. 如何实现幂等性

1. 数据库唯一索引：
   1. 适用于：插入/删除。
2. 数据库乐观锁：
   1. 适用于：更新。
3. 防重Token令牌
   1. 适用于：插入/更新/删除。
4. 唯一序列号
   1. 适用于：插入/更新/删除。
5. 状态机幂等

## 引用
>1. [SpringBoot 接口幂等性的实现方案](https://mp.weixin.qq.com/s/D3wZyWKLczK9rXBnwm4dtQ)
>1. [SpringBoot 接口幂等性的实现](http://www.mydlq.club/article/94/)
>2. [大厂高频面试题：给我说说高并发下接口幂等性的解决方案？本文汇总了所有解决方案。](https://mp.weixin.qq.com/s/8ZPdOVqEQZpvDFaoqxoqYQ)
>2. [高并发下接口幂等性解决方案](https://blog.csdn.net/u011635492/article/details/81058153)
>3. [面试阿里被问：“你的项目是如何处理重复请求/并发请求的？”](https://mp.weixin.qq.com/s/S0KYKVUUZIKdzxoIwP8ZXw)
>3. [优雅地处理重复请求（并发请求）——附Java实现](https://jaskey.github.io/blog/2020/05/19/handle-duplicate-request/)