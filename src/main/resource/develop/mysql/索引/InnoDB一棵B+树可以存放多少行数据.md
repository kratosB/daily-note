# [MySQL：InnoDB一棵B+树可以存放多少行数据？](https://juejin.cn/post/6904293886626103309)

1. 最小存储单位
   1. 磁盘最小单元是扇区，每个扇区可以存放512个字节的数。
   2. 操作系统中最小单元是块（block），最小单位是4kb。
   3. InnoDB存储引擎它也是有最小存储单位的，叫做页（Page），默认大小是16kb。
2. 聚簇索引：很常见，很基础。
   1. 假设主键是bigint(8)，指针大小是6字节，一个页16k，那么一个页可以放16384/14=1170个指针。
   2. 假设一条数据是1k，一页能放16条数据，那么2层的B+树能放1170*16=18720条数据。3层B+树能放1170*1170*16=21902400条数据.
3. 页的类型
4. 验证
   1. 前面计算过，2层的B+树理论上可以存放18000条左右，测试大约13000条数据左右，B+树就会成为3层了。
   2. 每个页都有一些固定的格式，比如文件头部、页面头部、文件尾部这些，数据放在用户记录这部分里的。
   3. 用户记录也不只放数据行，每个数据行还有一些其他标记，比如是否删除、最小记录、记录数、在堆中的位置信息、记录的类型、下一条记录的相对位置等等。
   4. MySQL参考手册中也有说到，InnoDB会保留页的1/16空闲，以便将来插入或者更新索引使用，如果主键id不是顺序插入的，那可能还不是1/16，会占用更多的空闲空间。
5. 为什么MySQL的索引要使用B+树而不是其它树形结构?比如B树？
   1. B+树的高度比较稳定，因为它的非叶子节点不会保存数据，只保存键值和指针的情况下，一个页能承载大量的数据。
   2. 树层数少了，io次数就少了。

## 引用
>1. [MySQL：InnoDB一棵B+树可以存放多少行数据？](https://juejin.cn/post/6904293886626103309)