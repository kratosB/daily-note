# 动态更换线程池的参数

1. setCorePoolSize
2. setMaximumPoolSize
3. prestartCoreThread: 线程池预热。
4. allowCoreThreadTimeOut=true，允许回收核心线程。
5. 修改队列：
   1. 复制linkedBlockQueue的代码
   2. 把final的capacity修改成非final
   3. 自己写一个setCapacity方法，修改一下capacity，同时signalNotFull一下。
   这个地方有一个小问题，如果线程池用中put，此时改了线程池+没有signal，put的地方就会一直等。需要一个signal，或者一个新的put（里面有signal）。  
   不过线程池里用的是offer，这个地方不会阻塞。但是如果能在setCapacity方法里signal一下，会避免以后有坑。
6. 

##
>1. [如何设置线程池参数？美团给出了一个让面试官虎躯一震的回答。](https://mp.weixin.qq.com/s/9HLuPcoWmTqAeFKa1kj-_A)
>1. [Java线程池实现原理及其在美团业务中的实践](https://mp.weixin.qq.com/s/baYuX8aCwQ9PP6k7TDl2Ww)
>1. [填个坑！再谈线程池动态调整那点事](https://mp.weixin.qq.com/s/FJQ5MhB1kMp8lP1NA6q4Vg)
>1. [面试官：你给我说一下线程池里面的几把锁](https://mp.weixin.qq.com/s/hduWrrK4B8x8Z3C7RnIhjw)