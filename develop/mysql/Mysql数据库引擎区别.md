## 各种引擎的介绍

### ISAM
1. 执行读取操作的速度很快，而且不占用大量的内存和存储资源。

2. 不支持事务处理，也不能够容错。

### MYISAM
1. MYISAM是MYSQL的ISAM扩展格式和默认的数据库引擎。

2. 提供ISAM里所没有的索引和字段管理的功能。

3. 使用一种表格锁定的机制，来优化多个并发的读写操作。

4. 不支持事务处理。

### HEAP
1. HEAP允许只驻留在内存里的临时表格。驻留在内存里让HEAP要比ISAM和MYISAM都快，但是它所管理的数据是不稳定的，而且如果在关机之前没有进行保存，那么所有的数据都会丢失。

### INNODB和BERKLEYDB
1. INNODB和BDB包括了对事务处理和外来键的支持，这两点都是前两个引擎所没有的。


## 索引

### MYISAM
1. MyISAM引擎的索引结构为B+Tree。

2. B+Tree的数据域存储的内容为实际数据的地址。也就是说它的索引和实际的数据是分开的，只不过是用索引指向了实际的数据，这种索引就是所谓的`非聚集索引`。

3. MyISAM中，主索引和辅助索引（Secondary key）在结构上没有任何区别，只是主索引要求key是唯一的，而辅助索引的key可以重复。

>坏处，更新表里的数据的顺序或地址的时候，每个索引都要跟着变，聚集索引中只有主键索引要跟着一起变

### INNODB
1. INNODB索引结构同样也是B+Tree。

2. Innodb的索引文件本身就是数据文件，即B+Tree的数据域存储的就是实际的数据，这种索引就是`聚集索引（聚簇索引）`。这个索引的key就是数据表的主键，因此InnoDB表数据文件本身就是主索引。

3. 和MyISAM不同，InnoDB的辅助索引数据域存储的也是相应记录主键的值而不是地址，所以当以辅助索引查找时，会先根据辅助索引找到主键，再根据主键索引找到实际的数据。所以Innodb不建议使用过长的主键，否则会使辅助索引变得过大。建议使用自增的字段作为主键，这样B+Tree的每一个结点都会被顺序的填满，而不会频繁的分裂调整，会有效的提升插入数据的效率。

>另外一个好处，相对于MyISAM，二级索引与聚簇索引有很大的不同。InnoDB的二级索引的叶子包含primary key的值，而不是行指针(row pointers)，这减小了移动数据或者数据页面分裂时维护二级索引的开销，因为InnoDB不需要更新索引的行指针。

4. 因为InnoDB的数据文件本身要按主键聚集，所以InnoDB要求表必须有主键（MyISAM可以没有），如果没有显式指定，则MySQL系统会自动选择一个可以唯一标识数据记录的列作为主键，如果不存在这种列，则MySQL自动为InnoDB表生成一个隐含字段作为主键，这个字段长度为6个字节，类型为长整形。

---
>第一个重大区别是InnoDB的数据文件本身就是索引文件。第二个与MyISAM索引的不同是InnoDB的辅助索引data域存储相应记录主键的值而不是地址。

>注：聚簇索引保证关键字的值相近的元组存储的物理位置也相同（所以字符串类型不宜建立聚簇索引，特别是随机字符串，会使得系统进行大量的移动操作），且一个表只能有一个聚簇索引。